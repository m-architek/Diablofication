<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Diablofication | Camera Lock</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="container-lg px-3 my-5 markdown-body">
        <h2 id="camera-lock">Camera Lock</h2>

        <p>This component locks camera on protagonist character right after game loading. 
            Protagonist is then always in the center of the screen. 
            Before every cutscene scroll is unlocked to allow its correct display.
            Scroll is automatically locked back after cutscene end.</p>

        <p>If EEex not present, this component use LockScroll() script action. From game scripts 
            this action can be applied on character using ActionOverride() action. However, this is not suitable for UI 
            since ActionOverride() overwrites creature action list, what can lead to stopping movement, wasting spell etc. 
            Instead ActionOverride(), UI extension is using fact that C:Eval(..) method adds evaluated action at the end of 
            action list of creature that is currently under the cursor, this also include situation 
            when cursor is on character portrait. This allows for locking camera without character action interruption.</p>

        <p>With EEex, lock is performed directly on engine structures. This allows to omit creature action list 
            and perform camera lock immediately after click, even if character is in the middle of the action. 
            It also allows for performing camera lock on "select all" double click, since ActionOverride() is not longer required.</p>

        <p>Component was also tested in multiplayer game. Camera is locked automatically on the highest character controlled by player 
            (EEex only). Unlocking camera before cutscenes works correctly, however during dialogues initiated by other players 
            camera stays lock where it was. All UI actions works like in singleplayer mode and not disrupt other players.</p>

        <p>From technical perspective, in multiplayer game all (un)lock camera related actions executed from game scripts 
            need to be applied through action list of character controlled by particular player. 
            That means all such actions need to be repeated with ActionOverride(PlayerX,..) 
            what can be done only if it not disrupts singleplayer game (when all characters are controlled by the same player).</p>

        <hr />

        <p><a href="../index.html#camera-lock">&lt; Back to Readme</a></p>
    </div>
</body>

</html>