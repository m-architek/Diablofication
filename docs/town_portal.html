<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Diablofication | Town Portal</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="container-lg px-3 my-5 markdown-body">
        <h2 id="town-portal">Town Portal</h2>

        <p>Casting of Town Portal spell starts cutscene that move whole party to respawn point.
            Respawn points are resolved in the same way as in <a href="character_respawn.html">Character Respawn</a> component. 
            During teleport process Spiritual Clarity spell is cast on every party member.</p>
            
        <p>Town Portal caster receives innate ability that allows for teleport back to original place, together with entire party.
            After return, party members appears next to each other (they not maintain their original positions).
            Return spell ability is removed after use, after next Town Portal cast by any character, after respawn 
            (if <a href="character_respawn.html">Character Respawn</a> component is installed), 
            in some plot critical situations when such return wouldn't make sense (e.g. after being arrested in Candlekeep).
            Casting of return spell can be interrupted, however it is not wasted and can always be casted again.</p>

        <p>Point where Town Portal caster were standing is marked with marker creature at the beginning of teleport process.
            However, to perform return teleport there is also required to know area where it happened.
            Scripts of all areas in the game are extended, to track when each character is entering them. 
            Town Portal teleport process resolves last entered area and stores in in separate variable for use during return teleport.</p>

        <p>Town Portal scroll is standard arcane spell scroll, but without class usage restrictions. 
            This allows every character to use it for casting spell. For spell learning normal restrictions still applies. 
            Scroll is added to every store with category "Temple" with unlimited amount.</p>

        <hr />

        <p><a href="../index.html#town-portal">&lt; Back to Readme</a></p>
    </div>
</body>

</html>